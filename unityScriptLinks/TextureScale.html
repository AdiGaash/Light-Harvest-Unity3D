<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>TextureScale - Unify Community Wiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.19.1" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Unify Community Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.unity3d.com/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Unify Community Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://wiki.unity3d.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://wiki.unity3d.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: mediawiki:resourceloader:filter:minify-css:7:c88e2bcd56513749bec09a7e29cb3ffa */
</style>

<script src="http://wiki.unity3d.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TextureScale","wgTitle":"TextureScale","wgCurRevisionId":14831,"wgArticleId":2876,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Utility","JavaScript"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgRelevantPageName":"TextureScale","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function($){mw.user.tokens.set({"editToken":"+\\","watchToken":false});;},{},{});

/* cache key: mediawiki:resourceloader:filter:minify-js:7:9983699ab6150ffa89a90653b2338ac8 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-javascript {line-height: normal;}
.source-javascript li, .source-javascript pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for javascript
 * CSS class: source-javascript, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.javascript.source-javascript .de1, .javascript.source-javascript .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.javascript.source-javascript  {font-family:monospace;}
.javascript.source-javascript .imp {font-weight: bold; color: red;}
.javascript.source-javascript li, .javascript.source-javascript .li1 {font-weight: normal; vertical-align:top;}
.javascript.source-javascript .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.javascript.source-javascript .li2 {font-weight: bold; vertical-align:top;}
.javascript.source-javascript .kw1 {color: #000066; font-weight: bold;}
.javascript.source-javascript .kw2 {color: #003366; font-weight: bold;}
.javascript.source-javascript .kw3 {color: #000066;}
.javascript.source-javascript .co1 {color: #006600; font-style: italic;}
.javascript.source-javascript .co2 {color: #009966; font-style: italic;}
.javascript.source-javascript .coMULTI {color: #006600; font-style: italic;}
.javascript.source-javascript .es0 {color: #000099; font-weight: bold;}
.javascript.source-javascript .br0 {color: #009900;}
.javascript.source-javascript .sy0 {color: #339933;}
.javascript.source-javascript .st0 {color: #3366CC;}
.javascript.source-javascript .nu0 {color: #CC0000;}
.javascript.source-javascript .me1 {color: #660066;}
.javascript.source-javascript .ln-xtra, .javascript.source-javascript li.ln-xtra, .javascript.source-javascript div.ln-xtra {background-color: #ffc;}
.javascript.source-javascript span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-TextureScale skin-vector action-view">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">
				<span dir="auto">TextureScale</span>
			</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From Unify Community Wiki</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to: <a href="#mw-head">navigation</a>,
					<a href="#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Author: Eric Haines (Eric5h5)
</p>
<h2> <span class="mw-headline" id="Description">Description</span></h2>
<p>If you've used Texture2D.Resize, you may have been disappointed to find that it only resizes the texture; it doesn't scale the contents. Using TextureScale, however, you can in fact do just that, using either bilinear or point (nearest neighbor) filtering. It also uses multi-threading to speed up the process on CPUs with more than one core. (Although SetPixels() and Apply() cause a pretty big hit, so the multi-threading is perhaps limited in usefulness, but it can still be nice for large textures, and in any case it's faster than not having it.)
</p>
<h2> <span class="mw-headline" id="Usage"> Usage </span></h2>
<p>Name this script TextureScale and have it somewhere in your project, preferably in a folder such as Standard Assets that compiles before other folders, so you can call it from C# or Boo.  You can then call TextureScale.Bilinear to use bilinear scaling, and TextureScale.Point to use point scaling.  The arguments are:
</p><p>function <b>Bilinear</b> (<b>texture</b>&#160;: Texture2D, <b>newWidth</b>&#160;: int, <b>newHeight</b>&#160;: int)&#160;: void
</p><p><b>texture</b> is the texture that you want to scale using bilinear filtering. <b>newWidth</b> and <b>newHeight</b> are the desired dimensions for the texture. It will be resized using Texture2D.Resize, and the contents scaled. Texture2D.Apply is called when done so that the changes take effect immediately. The texture must be RGBA32, RGB24, or Alpha8 in order for the function to work, and also must be read/write enabled.
</p><p>function <b>Point</b> (<b>texture</b>&#160;: Texture2D, <b>newWidth</b>&#160;: int, <b>newHeight</b>&#160;: int)&#160;: void
</p><p>The same as above, except point filtering is used instead of bilinear.
</p><p>Note that the functions resize the texture that's passed in; they don't return a new texture. An example of usage:
</p>
<div dir="ltr" class="mw-geshi mw-content-ltr"><div class="javascript source-javascript"><pre class="de1"><span class="kw2">var</span> tex <span class="sy0">:</span> Texture2D<span class="sy0">;</span>
&#160;
<span class="kw2">function</span> Start <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw2">var</span> newTex <span class="sy0">=</span> Instantiate <span class="br0">&#40;</span>tex<span class="br0">&#41;</span><span class="sy0">;</span>
	renderer.<span class="me1">material</span>.<span class="me1">mainTexture</span> <span class="sy0">=</span> newTex<span class="sy0">;</span>
	TextureScale.<span class="me1">Bilinear</span> <span class="br0">&#40;</span>newTex<span class="sy0">,</span> tex.<span class="me1">width</span><span class="sy0">*</span><span class="nu0">2</span><span class="sy0">,</span> tex.<span class="me1">height</span><span class="sy0">*</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Note that you probably don't want to scale the actual textures in your project.  Instantiate a copy first, as shown in the code above.
</p>
<h2> <span class="mw-headline" id="TextureScale.js"> TextureScale.js </span></h2>
<div dir="ltr" class="mw-geshi mw-content-ltr"><div class="javascript source-javascript"><pre class="de1"><span class="co1">// Only works on ARGB32, RGB24 and Alpha8 textures that are marked readable</span>
&#160;
<span class="kw2">import</span> System.<span class="me1">Threading</span><span class="sy0">;</span>
&#160;
 <span class="kw2">class</span> TextureScale
 <span class="br0">&#123;</span>
&#160;
	<span class="kw2">class</span> ThreadData <span class="br0">&#123;</span>
		<span class="kw2">var</span> start <span class="sy0">:</span> int<span class="sy0">;</span>
		<span class="kw2">var</span> end <span class="sy0">:</span> int<span class="sy0">;</span>
		<span class="kw2">function</span> ThreadData <span class="br0">&#40;</span>s <span class="sy0">:</span> int<span class="sy0">,</span> e <span class="sy0">:</span> int<span class="br0">&#41;</span> <span class="br0">&#123;</span>
			start <span class="sy0">=</span> s<span class="sy0">;</span>
			end <span class="sy0">=</span> e<span class="sy0">;</span>
		<span class="br0">&#125;</span>
	<span class="br0">&#125;</span>
&#160;
	<span class="kw2">private</span> static <span class="kw2">var</span> texColors <span class="sy0">:</span> Color<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">;</span>
	<span class="kw2">private</span> static <span class="kw2">var</span> newColors <span class="sy0">:</span> Color<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">;</span>
	<span class="kw2">private</span> static <span class="kw2">var</span> w <span class="sy0">:</span> int<span class="sy0">;</span>
	<span class="kw2">private</span> static <span class="kw2">var</span> ratioX <span class="sy0">:</span> float<span class="sy0">;</span>
	<span class="kw2">private</span> static <span class="kw2">var</span> ratioY <span class="sy0">:</span> float<span class="sy0">;</span>
	<span class="kw2">private</span> static <span class="kw2">var</span> w2 <span class="sy0">:</span> int<span class="sy0">;</span>
	<span class="kw2">private</span> static <span class="kw2">var</span> finishCount <span class="sy0">:</span> int<span class="sy0">;</span>
	<span class="kw2">private</span> static <span class="kw2">var</span> mutex <span class="sy0">:</span> Mutex<span class="sy0">;</span>
&#160;
	static <span class="kw2">function</span> Point <span class="br0">&#40;</span>tex <span class="sy0">:</span> Texture2D<span class="sy0">,</span> newWidth <span class="sy0">:</span> int<span class="sy0">,</span> newHeight <span class="sy0">:</span> int<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		ThreadedScale <span class="br0">&#40;</span>tex<span class="sy0">,</span> newWidth<span class="sy0">,</span> newHeight<span class="sy0">,</span> <span class="kw2">false</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
&#160;
	static <span class="kw2">function</span> Bilinear <span class="br0">&#40;</span>tex <span class="sy0">:</span> Texture2D<span class="sy0">,</span> newWidth <span class="sy0">:</span> int<span class="sy0">,</span> newHeight <span class="sy0">:</span> int<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		ThreadedScale <span class="br0">&#40;</span>tex<span class="sy0">,</span> newWidth<span class="sy0">,</span> newHeight<span class="sy0">,</span> <span class="kw2">true</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
&#160;
	<span class="kw2">private</span> static <span class="kw2">function</span> ThreadedScale <span class="br0">&#40;</span>tex <span class="sy0">:</span> Texture2D<span class="sy0">,</span> newWidth <span class="sy0">:</span> int<span class="sy0">,</span> newHeight <span class="sy0">:</span> int<span class="sy0">,</span> useBilinear <span class="sy0">:</span> boolean<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		texColors <span class="sy0">=</span> tex.<span class="me1">GetPixels</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
		newColors <span class="sy0">=</span> <span class="kw2">new</span> Color<span class="br0">&#91;</span>newWidth <span class="sy0">*</span> newHeight<span class="br0">&#93;</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span>useBilinear<span class="br0">&#41;</span> <span class="br0">&#123;</span>
			ratioX <span class="sy0">=</span> <span class="nu0">1.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span>parseFloat<span class="br0">&#40;</span>newWidth<span class="br0">&#41;</span> <span class="sy0">/</span> <span class="br0">&#40;</span>tex.<span class="me1">width</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
			ratioY <span class="sy0">=</span> <span class="nu0">1.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span>parseFloat<span class="br0">&#40;</span>newHeight<span class="br0">&#41;</span> <span class="sy0">/</span> <span class="br0">&#40;</span>tex.<span class="me1">height</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
		<span class="kw1">else</span> <span class="br0">&#123;</span>
			ratioX <span class="sy0">=</span> parseFloat<span class="br0">&#40;</span>tex.<span class="me1">width</span><span class="br0">&#41;</span> <span class="sy0">/</span> newWidth<span class="sy0">;</span>
			ratioY <span class="sy0">=</span> parseFloat<span class="br0">&#40;</span>tex.<span class="me1">height</span><span class="br0">&#41;</span> <span class="sy0">/</span> newHeight<span class="sy0">;</span>
		<span class="br0">&#125;</span>
		w <span class="sy0">=</span> tex.<span class="me1">width</span><span class="sy0">;</span>
		w2 <span class="sy0">=</span> newWidth<span class="sy0">;</span>
        <span class="kw2">var</span> cores <span class="sy0">:</span> float<span class="sy0">;</span>
		cores <span class="sy0">=</span> Mathf.<span class="me1">Min</span><span class="br0">&#40;</span>SystemInfo.<span class="me1">processorCount</span><span class="sy0">,</span> newHeight<span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="kw2">var</span> slice <span class="sy0">=</span> newHeight<span class="sy0">/</span>cores<span class="sy0">;</span>
&#160;
		finishCount <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span>mutex <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
			mutex <span class="sy0">=</span> <span class="kw2">new</span> Mutex<span class="br0">&#40;</span><span class="kw2">false</span><span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span>cores <span class="sy0">&gt;</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw2">var</span> i <span class="sy0">:</span> int<span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">&#40;</span>i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> cores<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
				<span class="kw2">var</span> threadData <span class="sy0">=</span> <span class="kw2">new</span> ThreadData<span class="br0">&#40;</span>slice<span class="sy0">*</span>i<span class="sy0">,</span> slice<span class="sy0">*</span><span class="br0">&#40;</span>i<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
				<span class="kw2">var</span> thread <span class="sy0">=</span> useBilinear<span class="sy0">?</span> <span class="kw2">new</span> Thread<span class="br0">&#40;</span>BilinearScale<span class="br0">&#41;</span> <span class="sy0">:</span> <span class="kw2">new</span> Thread<span class="br0">&#40;</span>PointScale<span class="br0">&#41;</span><span class="sy0">;</span>
				thread.<span class="me1">Start</span><span class="br0">&#40;</span>threadData<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
			threadData <span class="sy0">=</span> <span class="kw2">new</span> ThreadData<span class="br0">&#40;</span>slice<span class="sy0">*</span>i<span class="sy0">,</span> newHeight<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">&#40;</span>useBilinear<span class="br0">&#41;</span> <span class="br0">&#123;</span>
				BilinearScale<span class="br0">&#40;</span>threadData<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
			<span class="kw1">else</span> <span class="br0">&#123;</span>
				PointScale<span class="br0">&#40;</span>threadData<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
			<span class="kw1">while</span> <span class="br0">&#40;</span>finishCount <span class="sy0">&lt;</span> cores<span class="br0">&#41;</span> <span class="br0">&#123;</span>
						Thread.<span class="me1">Sleep</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
					<span class="br0">&#125;</span>
		<span class="br0">&#125;</span>
		<span class="kw1">else</span> <span class="br0">&#123;</span>
			threadData <span class="sy0">=</span> <span class="kw2">new</span> ThreadData<span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> newHeight<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="kw1">if</span> <span class="br0">&#40;</span>useBilinear<span class="br0">&#41;</span> <span class="br0">&#123;</span>
				BilinearScale<span class="br0">&#40;</span>threadData<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
			<span class="kw1">else</span> <span class="br0">&#123;</span>
				PointScale<span class="br0">&#40;</span>threadData<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
		<span class="br0">&#125;</span>
&#160;
		tex.<span class="me1">Resize</span><span class="br0">&#40;</span>newWidth<span class="sy0">,</span> newHeight<span class="br0">&#41;</span><span class="sy0">;</span>
		tex.<span class="me1">SetPixels</span><span class="br0">&#40;</span>newColors<span class="br0">&#41;</span><span class="sy0">;</span>
		tex.<span class="me1">Apply</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
&#160;
	<span class="kw2">private</span> static <span class="kw2">function</span> BilinearScale <span class="br0">&#40;</span>threadData <span class="sy0">:</span> ThreadData<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw2">var</span> y <span class="sy0">:</span> int<span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">&#40;</span>y <span class="sy0">=</span> threadData.<span class="me1">start</span><span class="sy0">;</span> y <span class="sy0">&lt;</span> threadData.<span class="me1">end</span><span class="sy0">;</span> y<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
			<span class="kw2">var</span> yFloor <span class="sy0">=</span> Mathf.<span class="me1">Floor</span><span class="br0">&#40;</span>y <span class="sy0">*</span> ratioY<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="kw2">var</span> y1 <span class="sy0">=</span> yFloor <span class="sy0">*</span> w<span class="sy0">;</span>
			<span class="kw2">var</span> y2 <span class="sy0">=</span> <span class="br0">&#40;</span>yFloor<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="sy0">*</span> w<span class="sy0">;</span>
			<span class="kw2">var</span> yw <span class="sy0">=</span> y <span class="sy0">*</span> w2<span class="sy0">;</span>
&#160;
            <span class="kw2">var</span> x<span class="sy0">:</span> int<span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">&#40;</span>x <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> x <span class="sy0">&lt;</span> w2<span class="sy0">;</span> x<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
				<span class="kw2">var</span> xFloor <span class="sy0">=</span> Mathf.<span class="me1">Floor</span><span class="br0">&#40;</span>x <span class="sy0">*</span> ratioX<span class="br0">&#41;</span><span class="sy0">;</span>
				<span class="kw2">var</span> xLerp <span class="sy0">=</span> x <span class="sy0">*</span> ratioX<span class="sy0">-</span>xFloor<span class="sy0">;</span>
				newColors<span class="br0">&#91;</span>yw <span class="sy0">+</span> x<span class="br0">&#93;</span> <span class="sy0">=</span> ColorLerpUnclamped<span class="br0">&#40;</span>ColorLerpUnclamped<span class="br0">&#40;</span>texColors<span class="br0">&#91;</span>y1 <span class="sy0">+</span> xFloor<span class="br0">&#93;</span><span class="sy0">,</span> texColors<span class="br0">&#91;</span>y1 <span class="sy0">+</span> xFloor<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">,</span> xLerp<span class="br0">&#41;</span><span class="sy0">,</span>
													   ColorLerpUnclamped<span class="br0">&#40;</span>texColors<span class="br0">&#91;</span>y2 <span class="sy0">+</span> xFloor<span class="br0">&#93;</span><span class="sy0">,</span> texColors<span class="br0">&#91;</span>y2 <span class="sy0">+</span> xFloor<span class="sy0">+</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">,</span> xLerp<span class="br0">&#41;</span><span class="sy0">,</span>
													   y<span class="sy0">*</span>ratioY<span class="sy0">-</span>yFloor<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
		<span class="br0">&#125;</span>
&#160;
		mutex.<span class="me1">WaitOne</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
		finishCount<span class="sy0">++;</span>
		mutex.<span class="me1">ReleaseMutex</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
&#160;
	<span class="kw2">private</span> static <span class="kw2">function</span> PointScale <span class="br0">&#40;</span>threadData <span class="sy0">:</span> ThreadData<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw2">var</span> y <span class="sy0">:</span> int<span class="sy0">;</span>
		<span class="kw1">for</span> <span class="br0">&#40;</span>y <span class="sy0">=</span> threadData.<span class="me1">start</span><span class="sy0">;</span> y <span class="sy0">&lt;</span> threadData.<span class="me1">end</span><span class="sy0">;</span> y<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
			<span class="kw2">var</span> thisY <span class="sy0">=</span> parseInt<span class="br0">&#40;</span>ratioY <span class="sy0">*</span> y<span class="br0">&#41;</span> <span class="sy0">*</span> w<span class="sy0">;</span>
			<span class="kw2">var</span> yw <span class="sy0">=</span> y <span class="sy0">*</span> w2<span class="sy0">;</span>
            <span class="kw2">var</span> x <span class="sy0">:</span> int<span class="sy0">;</span>
			<span class="kw1">for</span> <span class="br0">&#40;</span>x <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> x <span class="sy0">&lt;</span> w2<span class="sy0">;</span> x<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
				newColors<span class="br0">&#91;</span>yw <span class="sy0">+</span> x<span class="br0">&#93;</span> <span class="sy0">=</span> texColors<span class="br0">&#91;</span>thisY <span class="sy0">+</span> ratioX<span class="sy0">*</span>x<span class="br0">&#93;</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
		<span class="br0">&#125;</span>
&#160;
		mutex.<span class="me1">WaitOne</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
		finishCount<span class="sy0">++;</span>
		mutex.<span class="me1">ReleaseMutex</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
&#160;
	<span class="kw2">private</span> static <span class="kw2">function</span> ColorLerpUnclamped <span class="br0">&#40;</span>c1 <span class="sy0">:</span> Color<span class="sy0">,</span> c2 <span class="sy0">:</span> Color<span class="sy0">,</span> value <span class="sy0">:</span> float<span class="br0">&#41;</span> <span class="sy0">:</span> Color <span class="br0">&#123;</span>
		<span class="kw1">return</span> <span class="kw2">new</span> Color <span class="br0">&#40;</span>c1.<span class="me1">r</span> <span class="sy0">+</span> <span class="br0">&#40;</span>c2.<span class="me1">r</span> <span class="sy0">-</span> c1.<span class="me1">r</span><span class="br0">&#41;</span><span class="sy0">*</span>value<span class="sy0">,</span> 
						  c1.<span class="me1">g</span> <span class="sy0">+</span> <span class="br0">&#40;</span>c2.<span class="me1">g</span> <span class="sy0">-</span> c1.<span class="me1">g</span><span class="br0">&#41;</span><span class="sy0">*</span>value<span class="sy0">,</span> 
						  c1.<span class="me1">b</span> <span class="sy0">+</span> <span class="br0">&#40;</span>c2.<span class="me1">b</span> <span class="sy0">-</span> c1.<span class="me1">b</span><span class="br0">&#41;</span><span class="sy0">*</span>value<span class="sy0">,</span> 
						  c1.<span class="me1">a</span> <span class="sy0">+</span> <span class="br0">&#40;</span>c2.<span class="me1">a</span> <span class="sy0">-</span> c1.<span class="me1">a</span><span class="br0">&#41;</span><span class="sy0">*</span>value<span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>

<!-- 
NewPP limit report
Preprocessor node count: 23/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki:pcache:idhash:2876-0!*!*!!*!*!* and timestamp 20121024035336 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://wiki.unity3d.com/index.php?title=TextureScale&amp;oldid=14831">http://wiki.unity3d.com/index.php?title=TextureScale&amp;oldid=14831</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/index.php/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/index.php?title=Category:Utility&amp;action=edit&amp;redlink=1" class="new" title="Category:Utility (page does not exist)">Utility</a></li><li><a href="/index.php/Category:JavaScript" title="Category:JavaScript">JavaScript</a></li></ul></div></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Personal tools</h5>
	<ul>
		<li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=TextureScale" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in / create account</a></li>
	</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Namespaces</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/index.php/TextureScale"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/index.php?title=Talk:TextureScale&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
	<h4>
		</h4>
	<h5><span>Variants</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Views</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/index.php/TextureScale" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="/index.php?title=TextureScale&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/index.php?title=TextureScale&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Actions</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="/index.php" id="searchform">
				<div>
			<input type="search" name="search" title="Search Unify Community Wiki [f]" accesskey="f" id="searchInput" />			<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />			<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />					<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(/images/wiki.png);" href="/index.php/Main_Page"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- Navigation -->
<div class="portal" id='p-Navigation'>
	<h5>Navigation</h5>
	<div class="body">
		<ul>
			<li id="n-mainpage"><a href="/index.php/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
			<li id="n-Extensions"><a href="/index.php/Extensions">Extensions</a></li>
			<li id="n-Particle-Library"><a href="/index.php/Particle_Library">Particle Library</a></li>
			<li id="n-Programming"><a href="/index.php/Programming">Programming</a></li>
			<li id="n-Scripts"><a href="/index.php/Scripts">Scripts</a></li>
			<li id="n-Shaders"><a href="/index.php/Shaders">Shaders</a></li>
			<li id="n-Wizards"><a href="/index.php/Wizards">Wizards</a></li>
		</ul>
	</div>
</div>

<!-- /Navigation -->

<!-- Extras -->
<div class="portal" id='p-Extras'>
	<h5>Extras</h5>
	<div class="body">
		<ul>
			<li id="n-Tips.2C-Tricks.2C-Tools"><a href="/index.php/Tips">Tips, Tricks, Tools</a></li>
			<li id="n-Tutorials"><a href="/index.php/Tutorials">Tutorials</a></li>
			<li id="n-Unity-Projects"><a href="/index.php/Unity_Projects">Unity Projects</a></li>
			<li id="n-Contests"><a href="/index.php/Contests">Contests</a></li>
			<li id="n-IRC-Chatroom"><a href="/index.php/IRC">IRC Chatroom</a></li>
		</ul>
	</div>
</div>

<!-- /Extras -->

<!-- Quick Links -->
<div class="portal" id='p-Quick_Links'>
	<h5>Quick Links</h5>
	<div class="body">
		<ul>
			<li id="n-portal"><a href="/index.php/Unify:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
			<li id="n-recentchanges"><a href="/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-New-Pages"><a href="/index.php/Special:NewPages">New Pages</a></li>
			<li id="n-help"><a href="/index.php/Help:Contents" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>

<!-- /Quick Links -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id='p-tb'>
	<h5>Toolbox</h5>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/index.php/Special:WhatLinksHere/TextureScale" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/index.php/Special:RecentChangesLinked/TextureScale" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li><a href="/index.php?title=TextureScale&amp;printable=yes" rel="alternate">Printable version</a></li>
			<li id="t-permalink"><a href="/index.php?title=TextureScale&amp;oldid=14831" title="Permanent link to this revision of the page">Permanent link</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 16 October 2012, at 20:18.</li>
											<li id="footer-info-viewcount">This page has been accessed 3,629 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="/index.php/Unify:Privacy_policy" title="Unify:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/index.php/Unify:About" title="Unify:About">About Unify Community Wiki</a></li>
											<li id="footer-places-disclaimer"><a href="/index.php/Unify:General_disclaimer" title="Unify:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="/skins/common/images/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="//www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script src="http://wiki.unity3d.com/load.php?debug=false&amp;lang=en&amp;modules=skins.vector&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready"], null, true);
}</script>
<script src="http://wiki.unity3d.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<!-- Served in 0.125 secs. -->
	</body>
</html>
